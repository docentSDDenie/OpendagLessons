<IfModule mod_rewrite.c>
    RewriteEngine On

    # Don't apply rewrites for existing files or directories
    RewriteCond %{REQUEST_FILENAME} -f [OR]
    RewriteCond %{REQUEST_FILENAME} -d
    RewriteRule ^ - [L]

    # Exclude common static asset extensions (images, css, js)
    RewriteRule \.(?:png|jpe?g|gif|webp|svg|ico|css|js)$ - [NC,L]

    # Route everything else to index.php
    RewriteRule ^ index.php [L,QSA]
</IfModule>

# Fallback for servers without mod_rewrite: attempt to serve index.php
<IfModule !mod_rewrite.c>
    ErrorDocument 404 /index.php
</IfModule>
